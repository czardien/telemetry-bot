[package]
name = "telemetry-bot"
version = "0.1.0"
authors = ["Kevin Stenerson <kstenerson@auditboard.com>"]
edition = "2018"
default-run = "telemetry-bot"

[features]
default = ["storage-telemetry-catalog"]

# # TODO: Implement "remote write" (protobuf-based) storage backend
# storage-remote-write = ["remote-write"]

storage-telemetry-catalog = ["telemetry-schema"]

# # TODO: Implement writing metrics directly to the prometheus schema
# storage-prometheus-catalog = []

[dependencies]
anyhow = "1.0.31"
async-std = "1.5.0"
chrono = "0.4.11"
ctrlc = { version = "3.1.4", features = ["termination"] } # handle SIGINT (and SIGTERM)
dotenv = "0.15.0"
futures = "0.3.5"
heck = "0.3.1"
kube = { version = "0.34.0", default-features = false, features = ["rustls-tls"] }
parallel-stream = "2.1.1"
parking_lot = "0.10.2"
sqlx = { version = "0.3.5", features = ["postgres", "tls"] }

# Local dependencies
telemetry-prometheus = { path = "../telemetry_prometheus" }
telemetry-schema = { path = "../telemetry_schema", optional = true }

# Enable compatibiltiy with `tokio`-based dependencies (the `kube` crate)
smol = { version = "0.1.11", features = ["tokio02"] }
